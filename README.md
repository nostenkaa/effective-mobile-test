# effective-mobile-test
## Техническое задание

Реализовать сервис, который:

- получает ФИО по API;
- обогащает данные через открытые API (возраст, пол, национальность);
- сохраняет результат в PostgreSQL;
- поиск по фильтру (имя, возраст, город) с пагинацией
- предоставляет REST API для CRUD-операций и фильтрации данных.

Обогащение выполняется через:

- [Agify](https://api.agify.io)
- [Genderize](https://api.genderize.io)
- [Nationalize](https://api.nationalize.io)


## Технологии

- HTTP-сервер — Gin;
- Логгирование — logrus: структурированное логгирование с поддержкой уровней логов;
- База данных — PostgreSQL;
- ORM — gorm;
- Драйвер БД — gorm.io/driver/postgres: драйвер PostgreSQL для GORM;
- Миграции — golang-migrate;
- Конфигурация — через .env-файл (библиотека godotenv) и/или флаги командной строки;
- Тестирование — testify;
- CI/CD —  GitHub Actions;
- Документация API — Swagger;
- Запуск контейнера — Docker;
##  Запуск проекта


```bash
git clone https://github.com/your-username/effective-mobile-test.git
cd effective-mobile-test
go mod download
make build
make docker
```
Конфигурация приложения
Приложение конфигурируется с помощью переменных окружения и флагов командной строки.
Доступные параметры для конфигурации представлены в следующей таблице:

##  Переменные окружения
Конфигурация приложения осуществляется через переменные окружения и флаги командной строки.

| Переменная окружения | Флаг командной строки | Описание                               |
|----------------------|------------------------|----------------------------------------|
| DATABASE_URL         | -d <dsn>               | Строка подключения к базе данных       |
| LOG_LEVEL            | -l <level>             | Уровень логирования (`debug`, `info`) |
| PORT                 | -p <port>              | Порт, на котором запускается сервер    |






### API-эндпоинты

| Метод  | Эндпоинт      | Описание                      |
| ------ | ------------- | ----------------------------- |
| GET    | /people       | Получить список пользователей |
| GET    | /people/{id}   | Получить пользователя по ID   |
| POST   | /people        | Создать нового пользователя   |
| PUT    | /people/{id}   | Обновить пользователя         |
| DELETE | /people/{id}   | Удалить пользователя          |
   

## Пример запроса

```bash
curl -X POST http://localhost:8080/people/ \
     -H "Content-Type: application/json" \
     -d '{"name":"Иван","surname":"Иванов"}'
```

### Поиск пользователя

Сервис поддерживает два способа поиска пользователя:

#### 1. По уникальному идентификатору (`id`)

Укажите идентификатор пользователя в URL.

**Пример запроса:**
```http
GET http://localhost:8080/people/1
Content-Type: application/json
```
#### 2.  По имени и/или фамилии

**Пример запроса:**
```http
GET http://localhost:8080/people?name=Ivan&surname=Ivanov
Content-Type: application/json
```
### Пагинация

Система поддерживает поиск людей  с возможностью **пагинации** (постраничного вывода результатов).
#### Формат запроса

##### В теле запроса

***Метод:*** `POST`  
***URL:*** `http://<host>:<port>/people`  
***Content-Type:*** `application/json`

**Тело запроса:**

```
{
  ...данные

  "page":        1,               // номер страницы (по умолчанию 1)
  "per_page":    10               // элементов на странице (по умолчанию 10)
}
```

##### Через URL
````
http://<host>:<port>/people?page=1&offset=10
````
## Управление приложением

### Makefile
- Показать все доступные команды:
````
  make help
````
- Сборка приложения:
````
  make build
````
- Запуск контейнера в Docker:
````
  make docker
````
- Запуск тестов:
````
  make test
````



